@model Invoice_Manager.Models.ViewModels.InvoiceFormViewModel

<h5 class="mb-3 mt-4">Pozycje na fakturze</h5>

<table class="table table-bordered table-hover" id="invoiceItemsTable">
    <thead class="table-dark">
        <tr>
            <th style="width: 35%">Produkt / Usługa</th>
            <th style="width: 10%">Ilość</th>
            <th style="width: 10%">Jm.</th>
            <th style="width: 15%">Cena Netto</th>
            <th style="width: 15%">VAT</th>
            <th style="width: 5%">Akcja</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<button type="button"
        class="btn btn-success mb-5"
        onclick="addNewRow()">
    <i class="fa fa-plus"></i>
    Dodaj pozycję
</button>

<table style="display: none;">
    <tr id="itemRowTemplate">
        <td>
            <select class="form-select product-select" name="Invoice.InvoiceItems[{0}].ProductId" onchange="productChanged(this)">
                <option value="">-- Wybierz z listy --</option>
                @foreach (var prod in Model.Products)
                {
                    <option value="@prod.ProductId">@prod.Name</option>
                }
            </select>
            <input type="hidden" name="Invoice.InvoiceItems[{0}].Name" class="item-name" />
        </td>
        <td>
            <input type="number" class="form-control quantity-input" name="Invoice.InvoiceItems[{0}].Quantity" value="1" step="0.01" oninput="calculateRow(this)" />
        </td>
        <td>
            <input type="text" class="form-control unit-input" name="Invoice.InvoiceItems[{0}].Unit" />
        </td>
        <td>
            <input type="number" class="form-control price-input" name="Invoice.InvoiceItems[{0}].UnitPriceNet" step="0.01" oninput="calculateRow(this)" />
        </td>
        <td>
            <select class="form-select tax-input" name="Invoice.InvoiceItems[{0}].TaxRateValue" onchange="calculateRow(this)">
                @foreach (var tax in Model.TaxRates)
                {
                    <option value="@tax.Rate">@tax.Name</option>
                }
            </select>
        </td>
        <td>
            <input type="text" class="form-control-plaintext text-end row-gross" readonly value="0.00" />
        </td>
        <td class="text-center">
            <button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">
                <i class="fa fa-trash"></i>
            </button>
        </td>
    </tr>


</table>
